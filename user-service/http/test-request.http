### Проверка доступности Eureka Server
GET http://localhost:8761/

###

### Проверка доступности API Gateway
GET http://localhost:8765/actuator/health

###

### Проверка зарегистрированных сервисов через Gateway
GET http://localhost:8765/actuator/gateway/routes

###

### 1. Регистрация нового пользователя (через Gateway)
POST http://localhost:8765/users/api/users/registration
Content-Type: application/json

{
  "name": "Паша",
  "secondName": "Техник",
  "password": "11111111",
  "email": "4057163@mail.ru",
  "birthDay": "1995-05-15",
  "enabled": false,
  "roles": ["ROLE_USER"]
}



###

### 2. Подтверждение регистрации (код нужно взять из логов/письма)
POST http://localhost:8765/users/api/users/confirm-registration?code=3A89A9

###

### 3. Повторная отправка кода подтверждения
POST http://localhost:8765/users/api/users/resend-confirm-registration?email=4057163@mail.ru

###

### 4. Запрос на сброс пароля
POST http://localhost:8765/users/api/users/send-password-resetCode?email=4057163@mail.ru

###

### 5. Сброс пароля с кодом
POST http://localhost:8765/users/api/users/reset-password-with-code
Content-Type: application/x-www-form-urlencoded

email=4057163@mail.ru&code=2DFBE7&newPassword=NewPassword123!

###

### 6. Запрос на изменение email
POST http://localhost:8765/users/api/users/send-email-reset-code
Content-Type: application/x-www-form-urlencoded

email=4057163@mail.ru&newEmail=9197195@mai.ru

###

### 7. Подтверждение изменения email
POST http://localhost:8765/users/api/users/confirm-email-change/1?code=FBC18C

###

### 8. Изменение пароля (требует аутентификации)
PUT http://localhost:8765/users/api/users/update-user-password/1
Authorization: Basic 9197195@mail.ru NewPassword123!
Content-Type: application/x-www-form-urlencoded

newPassword=SuperNewPassword123!&currenPassword=NewPassword123!

###

### 9. Добавление аватара (multipart/form-data)
POST http://localhost:8765/users/api/users/addAvatar/1/newAvatar
Authorization: Basic Basic 4057163@mail.ru 11111111
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="file"; filename="test-avatar.jpg"
Content-Type: image/jpeg

< ./test-avatar.jpg
--WebAppBoundary--

###

### 10. Добавление нескольких фото
POST http://localhost:8765/users/api/users/addPhotos/1
Authorization: Basic 4057163@mail.ru 11111111
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="files"; filename="photo1.jpg"
Content-Type: image/jpeg

< ./test-photo1.jpg
--WebAppBoundary
Content-Disposition: form-data; name="files"; filename="photo2.jpg"
Content-Type: image/jpeg

< ./test-photo2.jpg
--WebAppBoundary--

###

### 11. Обновление аватара
PUT http://localhost:8765/users/api/users/updateAvatar/1/2
Authorization: Basic 4057163@mail.ru 11111111

###

### 12. Удаление фото
DELETE http://localhost:8765/users/api/users/delete-photo/1/3
Authorization: Basic 4057163@mail.ru 11111111

###

### 13. Обновление ролей (для админа)
PUT http://localhost:8765/users/api/users/update-roles/1
Authorization: Basic 4057163@mail.ru 11111111
Content-Type: application/json

["ROLE_ADMIN"]

###

### 14. Повторная отправка кода для изменения email
POST http://localhost:8765/users/api/users/resend-email-resetCode?pendingEmail=newivan@example.com

###

### 15. Получение информации о текущем пользователе (требует аутентификации)// нет нормального метода пока
GET http://localhost:8765/users/api/users/current
Authorization: Basic 4057163@mail.ru 11111111
Content-Type: application/json

###
### 16.Получение всех пользователей
GET http://localhost:8765/users/api/users/get-all-users
###

### 17. Вход в систему (POST на /login с email и password)
POST http://localhost:8765/users/login
Content-Type: application/x-www-form-urlencoded

email=4057163@mail.ru&password=11111111

###

### 18. Проверка аутентификации через сессию (с куками)
GET http://localhost:8765/users/api/users/current
Content-Type: application/json

###

### 19. Вход с remember-me (запоминанием)
POST http://localhost:8765/users/login
Content-Type: application/x-www-form-urlencoded

email=4057163@mail.ru&password=11111111&remember-me=true

###

### 20. Выход из системы
POST http://localhost:8765/users/logout
Content-Type: application/json

###

### 21. Проверка защищенного эндпоинта (требует аутентификации)
GET http://localhost:8765/users/api/users/get-all-users

###
POST http://localhost:8765/users/auth/sing-in
Content-Type: application/json

{
  "email": "4057163@mail.ru",
  "password": "11111111"
}

> {%
    client.global.set("access_token", response.body.token);
    client.global.set("refresh_token", response.body.refreshToken);
    client.log("Access Token: " + response.body.token);
    client.log("Refresh Token: " + response.body.refreshToken);
%}

###
POST http://localhost:8765/users/auth/refresh
Content-Type: application/json

{"refreshToken":"eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiI0MDU3MTYzQG1haWwucnUiLCJleHAiOjE3NjkxMDAwNjF9.7-9J9Qj6AIY_RYac6dNtpmOgGffHgaPIRr_HRwdvZRpWDilo8OzncGRJCt-AcVsm"}
###
